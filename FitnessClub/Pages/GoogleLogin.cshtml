@page
@model FitnessClub.GoogleLoginModel
@{
    ViewData["Title"] = "Google Sign-in";
}

<script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="google-signin-client_id" content="819088013276-3fu3lq59ttk80bmllfcgko2t9lob7tbq.apps.googleusercontent.com">
<div class="g-signin2" data-onsuccess="onSignIn"></div>

<script>
    function onSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();

        id = profile.getId();
        name = profile.getName();
        imageUrl = profile.getImageUrl();
        email = profile.getEmail();

        document.getElementById('SignOutButton').style.visibility = 'visible';

        document.getElementById('Name').innerHTML = name;
        document.getElementById('Email').innerHTML = email;
        document.getElementById('pfpImg').src = imageUrl;
        document.getElementById('pfpImg').style.visibility = "visible";
    }
</script>
<body>
    <a href="#" onclick="signOut();" id="SignOutButton" style="visibility: hidden">Sign out</a>
    <p></p>
    <p id="Name"></p>
    <p id="Email"></p>
    <img id ="pfpImg" src="" alt="Your profile picture" style="visibility: hidden">

    <script>

        function signOut() {
            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function () {
                console.log('User signed out.');
            });
            document.getElementById('SignOutButton').style.visibility = 'hidden';

            document.getElementById('Name').innerHTML = "";
            document.getElementById('Email').innerHTML = "";
            document.getElementById('pfpImg').src = "";
            document.getElementById('pfpImg').style.visibility = "hidden";
        }
    </script>
</body>
<!--
<div class="text-center">
    <h1 class="display-4">Placeholder for Google Sign-in</h1>
</div>

    function onSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();
        document.write('ID: ' + profile.getId() + '<br>'); // Do not send to your backend! Use an ID token instead.
        document.write('Name: ' + profile.getName() + '<br>');
        document.write('Image URL: ' + profile.getImageUrl() + '<br>');
        document.write('Email: ' + profile.getEmail() + '<br>'); // This is null if the 'email' scope is not present.
    }
-->
